<div class="menu-section">
  <h2 class="section-title">Food Menu</h2>

  <!-- Filters Toggle Icon Button for Mobile -->
  <button class="filter-toggle-btn" (click)="toggleFilters()">
    <i class="fa fa-filter" aria-hidden="true"></i>
  </button>

  <!-- Filters -->
  <div class="filters-container" [class.hidden]="!showFilters">
    <mat-form-field appearance="outline" class="filters">
      <mat-label>Food Type</mat-label>
      <mat-select [(ngModel)]="selectedType">
        <mat-option value="">All</mat-option>
        <mat-option value="Veg">Veg</mat-option>
        <mat-option value="Non-Veg">Non-Veg</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="filters">
      <mat-label>Meal Type</mat-label>
      <mat-select [(ngModel)]="selectedMealType">
        <mat-option value="">All</mat-option>
        <mat-option value="Lunch">Lunch</mat-option>
        <mat-option value="Dinner">Dinner</mat-option>
        <mat-option value="Snack">Snack</mat-option>
        <mat-option value="Cool Drink">Cool Drink</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Search -->
    <mat-form-field appearance="outline" class="filters">
      <mat-label>Search</mat-label>
      <input matInput placeholder="Search by food name" [(ngModel)]="searchQuery" />
    </mat-form-field>
  </div>

  <!-- Food Menu Display -->
  <div class="food-menu">

    <div *ngIf="filteredFoods.length === 0" class="no-items-found">
      <p>No items found matching your search criteria.</p>
    </div>

    <mat-card *ngFor="let food of filteredFoods; trackBy: trackByFoodId" class="food-card">
      <img mat-card-image [src]="food.image" [alt]="food.name" class="food-image" />
      <mat-card-title>{{ food.name }}</mat-card-title>
      <mat-card-content>
        <p><strong>Price:</strong> {{ food.price | currency: 'INR' }}</p>
        <p><strong>Available Qty: <span style="color: red;"> {{ cartService.availableQty$()[food.id] || 0
              }}</span></strong> </p>
      </mat-card-content>

      <div class="button-conf">
        <div class="quantity-selector">
          <button color="primary" (click)="decreaseQuantity(food)"
            [disabled]="cartService.availableQty$()[food.id] <= 0">
            -
          </button>
          <span style="width: 15px;">{{ food.selectedQty || 0 }}</span>
          <button color="primary" (click)="increaseQuantity(food)"
            [disabled]="cartService.availableQty$()[food.id] <= 0">
            +
          </button>
        </div>

        <button class="btn-success cart-btn" (click)="addToCart(food)"
          [disabled]="cartService.availableQty$()[food.id] <= 0">
          Add <i class="fa fa-shopping-cart" aria-hidden="true"></i>
        </button>
      </div>
    </mat-card>
  </div>
</div>
